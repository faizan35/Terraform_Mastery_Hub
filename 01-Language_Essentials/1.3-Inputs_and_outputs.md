# 1.3 — Inputs & Outputs

### **1. Variables (`variable` block)**

- **Types** → Define what kind of value is allowed:

  - `string`, `number`, `bool`, `list`, `map`, `object`, `tuple`.

  ```hcl
  variable "region" {
    type    = string
    default = "ap-south-1"
  }
  ```

- **Defaults** → If not provided, Terraform uses the default.
- **Nullable** →

  - By default variables are nullable (`null` allowed).
  - `nullable = false` forces you to set a real value.

  ```hcl
  variable "instance_type" {
    type     = string
    nullable = false
  }
  ```

### **2. Locals (`locals` block)**

- Used to simplify and avoid repetition (**DRY principle**).
- Example:

  ```hcl
  locals {
    common_tags = {
      Project = "CRM"
      Owner   = "Faizan"
    }
  }

  resource "aws_s3_bucket" "this" {
    bucket = "crm-logs"
    tags   = local.common_tags
  }
  ```

### **3. Outputs**

- Expose values from a module or root for reuse.

- Example:

  ```hcl
  output "vpc_id" {
    value = aws_vpc.main.id
  }
  ```

- **Sensitive outputs**:

  - Use `sensitive = true` to hide secrets from CLI output.
  - Example:

    ```hcl
    output "db_password" {
      value     = aws_db_instance.main.password
      sensitive = true
    }
    ```

  - **Effect:** Hidden in `terraform plan/apply` output, but still available for dependent modules.

### **4. Variable Validation**

- Add custom rules to variables for **safety and clarity**.
- Example:

  ```hcl
  variable "instance_type" {
    type = string

    validation {
      condition     = can(regex("^t3\\.", var.instance_type))
      error_message = "Instance type must be a t3.* family."
    }
  }
  ```

- **Why:** Prevents mistakes early, with clear error messages.
- Interview tip: _“Always validate user inputs — it’s cheaper than debugging in production.”_
